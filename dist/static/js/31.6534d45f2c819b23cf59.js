webpackJsonp([31],{"1SRb":function(e,t){},ErTi:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("woOf"),r=a.n(o),i=a("mvHQ"),n=a.n(i),s={data:function(){return{filters:{name:"",createTime:""},groupNameList:[{groupId:"",groupName:""}],groupNameChoose:"",value:"",users:[{index:"1",name:"斯蒂芬",groupName:"出来打球",sex:1,idCard:"123456654321123456",age:20,phone:"18813104868",department:"内科",doctor:"蔡徐坤"},{index:"2",name:"史蒂夫",groupName:"出来打球",sex:2,idCard:"123456654321123456",age:21,phone:"18813104868",department:"内科",doctor:"蔡徐坤"},{index:"3",name:"阿庆嫂",groupName:"出来打球",sex:1,idCard:"123456654321123456",age:22,phone:"18813104868",department:"内科",doctor:"蔡徐坤"},{index:"4",name:"X森",groupName:"出来打球",sex:2,idCard:"123456654321123456",age:23,phone:"18813104868",department:"内科",doctor:"蔡徐坤"},{index:"5",name:"X森森",groupName:"出来打球",sex:1,idCard:"123456654321123456",age:24,phone:"18813104868",department:"内科",doctor:"蔡徐坤"},{index:"6",name:"X森森森",groupName:"出来打球",sex:2,idCard:"123456654321123456",age:25,phone:"18813104868",department:"内科",doctor:"蔡徐坤"},{index:"1",name:"斯蒂芬",groupName:"出来打球",sex:1,idCard:"123456654321123456",age:20,phone:"18813104868",department:"内科",doctor:"蔡徐坤"},{index:"2",name:"史蒂夫",groupName:"出来打球",sex:2,idCard:"123456654321123456",age:21,phone:"18813104868",department:"内科",doctor:"蔡徐坤"},{index:"3",name:"阿庆嫂",groupName:"出来打球",sex:1,idCard:"123456654321123456",age:22,phone:"18813104868",department:"内科",doctor:"蔡徐坤"},{index:"4",name:"X森",groupName:"出来打球",sex:2,idCard:"123456654321123456",age:23,phone:"18813104868",department:"内科",doctor:"蔡徐坤"},{index:"5",name:"X森森",groupName:"出来打球",sex:1,idCard:"123456654321123456",age:24,phone:"18813104868",department:"内科",doctor:"蔡徐坤"},{index:"6",name:"X森森森",groupName:"出来打球",sex:2,idCard:"123456654321123456",age:25,phone:"18813104868",department:"内科",doctor:"蔡徐坤"},{index:"1",name:"斯蒂芬",groupName:"出来打球",sex:1,idCard:"123456654321123456",age:20,phone:"18813104868",department:"内科",doctor:"蔡徐坤"},{index:"2",name:"史蒂夫",groupName:"出来打球",sex:2,idCard:"123456654321123456",age:21,phone:"18813104868",department:"内科",doctor:"蔡徐坤"},{index:"3",name:"阿庆嫂",groupName:"出来打球",sex:1,idCard:"123456654321123456",age:22,phone:"18813104868",department:"内科",doctor:"蔡徐坤"},{index:"4",name:"X森",groupName:"出来打球",sex:2,idCard:"123456654321123456",age:23,phone:"18813104868",department:"内科",doctor:"蔡徐坤"},{index:"5",name:"X森森",groupName:"出来打球",sex:1,idCard:"123456654321123456",age:24,phone:"18813104868",department:"内科",doctor:"蔡徐坤"},{index:"6",name:"X森森森",groupName:"出来打球",sex:2,idCard:"123456654321123456",age:25,phone:"18813104868",department:"内科",doctor:"蔡徐坤"}],total:20,page:1,listLoading:!1,sels:[],usersList:[],editFormVisible:!1,editLoading:!1,editFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}]},editForm:{id:0,name:"",sex:-1,age:0,birth:"",addr:"",pgone:"",card:"",group:"",marks:""},addFormVisible:!1,addFormVisible1:!1,addLoading:!1,addFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone:[{validator:function(e,t,a){if(0==/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/.test(t))return a(new Error("请输入正确的手机号")),!1;console.log("66666"),a()},trigger:"blur"}],sex:[{required:!0,message:"请输选择性别",trigger:"change"}],idCard:[{validator:function(e,t,a){if(!/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(t))return a(new Error("请输入正确的身份证号")),!1;console.log("66666"),a()},trigger:"blur"}]},addForm:{name:"",sex:-1,age:0,idCard:"",groupId:"",remark:"",phone:""},user:null,pageTotal:0,pageSize:0,newGroupName:""}},methods:{handleAdd1:function(){this.addFormVisible1=!0},createPlan:function(e,t){this.$router.push({name:"createPlan",params:{id:e,info:t}})},essentialInfo:function(e,t){sessionStorage.setItem("personInfo",n()(t)),this.$router.push({name:"EssentialInfo"})},createVisit:function(e,t){sessionStorage.setItem("personInfo",n()(t)),this.$router.push({name:"createVisit",params:{id:e,info:t}})},formatSex:function(e,t){return 1==e.sex?"男":2==e.sex?"女":"未知"},handleCurrentChange:function(e){console.log(e,"2333333333333")},getUsers:function(){var e=this;e.user=JSON.parse(sessionStorage.getItem("loginUser")),console.log(e.user),e.$http.get("/api/patient/getPatientList?hospitalId="+e.user.hospitalId.id+"&keywords="+e.filters.name).then(function(t){e.pageTotal=t.data.total,e.pageSize=t.data.size,e.usersList=t.data.list,console.log(t,"23333333333333333333333")}).catch(function(e){console.log(e)})},handleDel:function(e,t){var a=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){a.listLoading=!0;var e={id:t.id};removeUser(e).then(function(e){a.listLoading=!1,a.$message({message:"删除成功",type:"success"}),a.getUsers()})}).catch(function(){})},handleEdit:function(e,t){this.editFormVisible=!0,this.editForm=r()({},t)},handleAdd:function(){this.addFormVisible=!0},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;var t=r()({},e.editForm);t.birth=t.birth&&""!=t.birth?util.formatDate.format(new Date(t.birth),"yyyy-MM-dd"):"",editUser(t).then(function(t){e.editLoading=!1,e.$message({message:"提交成功",type:"success"}),e.$refs.editForm.resetFields(),e.editFormVisible=!1,e.getUsers()})})})},addSubmit:function(){var e=this;e.$refs.addForm.validate(function(t){t&&(e.addForm.hospitalId=e.user.hospitalId.id,e.addForm.doctorId=e.user.id,e.$confirm("确认提交吗？","提示",{}).then(function(){-1!=e.addForm.sex?""!=e.addForm.age?""!=e.addForm.groupId?(e.addLoading=!0,e.$http.post("/api/patient/addPatient",e.addForm).then(function(t){t.data?(e.$message({showClose:!0,message:"患者添加成功",type:"success"}),e.getUsers(),e.addFormVisible=!1,e.$refs.addForm.resetFields()):(e.$message({showClose:!0,message:"患者添加失败",type:"error"}),e.addFormVisible=!1,e.$refs.addForm.resetFields())}).catch(function(e){console.log(e)})):e.$message({showClose:!0,message:"您还未选择组别",type:"error"}):e.$message({showClose:!0,message:"您还未输入年龄",type:"error"}):e.$message({showClose:!0,message:"您还未选择性别",type:"error"})}))})},addClose:function(){this.addFormVisible=!1,this.$refs.addForm.resetFields()},closeDialog:function(){this.$refs.addForm.resetFields()},selsChange:function(e){this.sels=e},batchRemove:function(){var e=this,t=this.sels.map(function(e){return e.id}).toString();this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){e.listLoading=!0,batchRemoveUser({ids:t}).then(function(t){e.listLoading=!1,e.$message({message:"删除成功",type:"success"}),e.getUsers()})}).catch(function(){})},getGroupName:function(){var e=this;e.$http.get("/api/groups/getGroupListByDoctorId?doctorId="+e.user.id).then(function(t){e.groupNameList=t.data,console.log(t)}).catch(function(e){console.log(e)})},addNewGroup:function(){var e=this;e.$http.post("/api/groups/addGroup",{groupName:e.newGroupName,doctorId:e.user.id}).then(function(t){t.data?(e.$message({showClose:!0,message:"新建组别成功",type:"success"}),e.addFormVisible1=!1,e.getGroupName(),e.newGroupName=""):(e.$message({showClose:!0,message:"新建组别失败",type:"error"}),e.addFormVisible1=!1)}).catch(function(e){console.log(e)})}},mounted:function(){this.getUsers(),this.getGroupName()}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"table_container"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"角色名称"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getUsers}},[a("i",{staticClass:"el-icon-search",staticStyle:{"margin-right":"5px"}}),e._v("搜索")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.usersList,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"名称",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"groupId.groupName",align:"center",label:"上级角色",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"idCard",align:"center",label:"别名",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{round:"",type:"success"},on:{click:function(a){return e.createPlan(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{round:"",type:"primary"},on:{click:function(a){return e.essentialInfo(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{round:"",type:"warning"},on:{click:function(a){return e.createVisit(t.$index,t.row)}}},[e._v("角色分配")]),e._v(" "),a("el-button",{attrs:{round:"",type:"danger"},on:{click:function(a){return e.handleDel(t.$index,t.row)}}},[e._v("重置密码")])]}}])})],1),e._v(" "),e.pageSize>10?a("el-col",{staticClass:"toolbar toolbar_page",attrs:{span:24}},[a("el-pagination",{attrs:{layout:"prev, pager, next","page-size":e.pageSize,total:e.pageTotal},on:{"current-change":e.handleCurrentChange}})],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.editFormRules}},[a("el-form-item",{attrs:{label:"患者姓名",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:e.editForm.sex,callback:function(t){e.$set(e.editForm,"sex",t)},expression:"editForm.sex"}},[a("el-radio",{staticClass:"radio",attrs:{label:1}},[e._v("男")]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:0}},[e._v("女")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"年龄"}},[a("el-input-number",{attrs:{min:0,max:200},model:{value:e.editForm.age,callback:function(t){e.$set(e.editForm,"age",t)},expression:"editForm.age"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"生日"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.editForm.birth,callback:function(t){e.$set(e.editForm,"birth",t)},expression:"editForm.birth"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.editForm.addr,callback:function(t){e.$set(e.editForm,"addr",t)},expression:"editForm.addr"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.editSubmit(t)}}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新建患者",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("div",[e._v("sadsdsdsdadas")]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){return e.addClose(t)}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){return e.addSubmit(t)}}},[e._v("提交")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"新建组别",visible:e.addFormVisible1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible1=t}}},[e._v("\n    asdasd\n    "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.addFormVisible1=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){return e.addNewGroup(t)}}},[e._v("提交")])],1)])],1)},staticRenderFns:[]};var l=a("VU/8")(s,d,!1,function(e){a("1SRb")},"data-v-0ad3b4ca",null);t.default=l.exports}});