webpackJsonp([18],{"+Pls":function(t,e){},"+kGB":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={data:function(){return{filters:{name:""},value:"",total:20,page:1,headers:{"Content-Type":"multipart/form-data"},size:1,currentPage:1,listLoading:!1,ggArray:[],addFormVisible:!1,addForm:{pca:null},editFormVisible:!1,editForm:{}}},methods:{uploadUrl:function(){var t="https://ryjk.rongyijiankang.com/api/common/upload";return console.log(t),t},uploadSuccess:function(t,e){"1"==this.activeName?(this.imageUrl=URL.createObjectURL(e.raw),this.showNoticeUploading=!1,this.noticeImageUrl=t,this.noteInform.templatePicture=t):"3"==this.activeName&&(this.markingpic=URL.createObjectURL(e.raw),this.showMarkingUploading=!1,this.marketImageUrl=t,this.marketingInform.templatePicture=t)},beforeUpload:function(t){var e=this;e.showNoticeUploading=!0;var o="image/jpeg"===t.type,a=t.size/1024/1024<2;if(o)if(a){event.preventDefault();var i=new FormData;i.append("file",t),console.log(i,"文件！"),e.$http.post("/api/common/upload",i).then(function(t){null!=t.data?e.$message.success("上传成功！"):e.$message.error("上传失败！")}).catch(function(t){console.log(t)})}else this.$message.error("上传头像图片大小不能超过 2MB!");else this.$message.error("上传头像图片只能是 JPG 格式!")},getyyList:function(){this.$http.get("/api/notice/getNoticeList?userId="+this.$store.state.user.user.id).then(function(t){console.log(t.data,"获取广告列表")}).catch(function(t){console.log(t)})},handleAdd:function(){this.addFormVisible=!0},addDepartment:function(){this.$http.post("/api/common/upload",this.addForm).then(function(t){}).catch(function(t){console.log(t)})},delDepartment:function(t,e){var o=this;this.$confirm("此操作将删除该广告, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){o.$http.post("/api/hospital/deleteHospital",{id:e.id}).then(function(t){t.data?(o.$message.success("删除广告成功"),o.getyyList(),o.addFormVisible=!1):(o.$message.error("删除广告失败"),o.addFormVisible=!1)}).catch(function(t){console.log(t)})}).catch(function(){})},handleEdit:function(t,e){this.editFormVisible=!0,this.editForm=e,this.editForm.pca=[e.province,e.city,e.area]},upDateDepartment:function(){var t=this;t.editForm.province=t.editForm.pca[0],t.editForm.city=t.editForm.pca[1],t.editForm.area=t.editForm.pca[2],t.$http.post("/api/hospital/updateHospital",t.editForm).then(function(e){e.data?(t.$message.success("修改广告成功"),t.getyyList(),t.editFormVisible=!1):(t.$message.error("修改广告失败"),t.editFormVisible=!1)}).catch(function(t){console.log(t)})},handleSizeChange:function(){},handleCurrentChange:function(){},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)}},mounted:function(){this.uploadUrl()},created:function(){}},i={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"table_container"},[o("el-col",{staticClass:"toolbar toolbar_title",attrs:{span:24}},[o("h3",[t._v("广告管理")]),t._v(" "),o("el-form",{staticClass:"toolbar_form",attrs:{inline:!0,model:t.filters}},[o("el-form-item",{staticClass:"f-left search_input"},[o("el-input",{attrs:{placeholder:"广告名"},model:{value:t.filters.name,callback:function(e){t.$set(t.filters,"name",e)},expression:"filters.name"}},[o("template",{attrs:{icon:"el-icon-search"},slot:"append"},[o("el-button",{staticStyle:{"background-color":"#52d7ac","border-radius":"0",color:"#fff",border:"1px solid #52d7ac"},attrs:{type:"primary"},on:{click:t.getyyList}},[o("i",{staticClass:"el-icon-search",staticStyle:{"margin-right":"5px"}}),t._v("搜索")])],1)],2)],1),t._v(" "),o("el-form-item",[o("el-button",{staticStyle:{"background-color":"#52d7ac",border:"0","font-size":"14px"},attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("新增广告")])],1)],1)],1),t._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.ggArray,border:!0,stripe:"","highlight-current-row":""}},[o("el-table-column",{attrs:{prop:"name","show-overflow-tooltip":!0,align:"center",label:"广告名称",sortable:""}}),t._v(" "),o("el-table-column",{attrs:{prop:"name","show-overflow-tooltip":!0,align:"center",label:"广告地址",sortable:""}}),t._v(" "),o("el-table-column",{attrs:{prop:"createTime",align:"center",label:"创建时间",sortable:""}}),t._v(" "),o("el-table-column",{attrs:{align:"center",width:"360",fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{staticStyle:{color:"#f8b14b"},attrs:{round:"",type:"text"},on:{click:function(o){return t.handleEdit(e.$index,e.row)}}},[o("i",{staticClass:"el-icon-edit-outline",staticStyle:{"margin-right":"5px"}}),t._v("修改广告")]),t._v(" "),o("el-button",{staticStyle:{color:"#e15939"},attrs:{round:"",type:"text"},on:{click:function(o){return t.delDepartment(e.$index,e.row)}}},[o("i",{staticClass:"el-icon-delete",staticStyle:{"margin-right":"5px"}}),t._v("删除广告")])]}}])})],1),t._v(" "),t.ggArray.length>10?o("el-col",{staticClass:"toolbar toolbar_page",attrs:{span:24}},[o("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":t.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e(),t._v(" "),o("el-dialog",{attrs:{title:"新增广告",visible:t.addFormVisible,"modal-append-to-body":!1},on:{"update:visible":function(e){t.addFormVisible=e}}},[o("el-form",{ref:"addForm",attrs:{model:t.addForm,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"\t广告地址",prop:"description"}},[o("el-upload",{attrs:{action:t.uploadUrl(),multiple:!0,headers:t.headers,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"show-file-list":!0,"auto-upload":!0,"before-upload":t.beforeUpload,enctype:"multipart/form-data","list-type":"picture"}},[o("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[o("el-button",{nativeOn:{click:function(e){t.addFormVisible=!1}}},[t._v("取消")])],1)],1),t._v(" "),o("el-dialog",{attrs:{title:"修改广告",visible:t.editFormVisible,"modal-append-to-body":!1},on:{"update:visible":function(e){t.editFormVisible=e}}},[o("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"\t广告名称",prop:"name"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"\t广告地址",prop:"description"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editForm.address,callback:function(e){t.$set(t.editForm,"address",e)},expression:"editForm.address"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{nativeOn:{click:function(e){t.editFormVisible=!1}}},[t._v("取消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.upDateDepartment(e)}}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]};var r=o("VU/8")(a,i,!1,function(t){o("+Pls")},"data-v-606ce030",null);e.default=r.exports}});